{"board":"\n    <div id=\"board-list\">\n    <div class=\"board-itens\" id=\"board-item-0-main\"> \n                <label id=\"board-key-0-main\" onclick=\"loadBoard(boards[0].board)\">main</label>\n                <button class=\"delete\" onclick=\"remove(&quot;board-item-0-main&quot;)\">\n                    -\n                </button>\n            </div><div class=\"board-itens\" id=\"board-item-1-main_board\"> \n                <label id=\"board-key-1-main_board\" onclick=\"loadBoard(boards[1].board)\">main_board</label>\n                <button class=\"delete\" onclick=\"remove(&quot;board-item-1-main_board&quot;)\">\n                    -\n                </button>\n            </div></div>\n    <div class=\"nav\">\n        <h1>KanbEACH - Sprint 2</h1>\n        <button class=\"save-button\" onclick=\"storeCurrentBoard()\">Salvar</button>\n        <button class=\"save-button\" onclick=\"turnVisible()\">Board</button>\n    </div>\n    <div class=\"white-line\"></div> \n    <div class=\"columns\">\n        <div id=\"column_backlog\" class=\"column backlog\" ondrop=\"drop(event)\" ondragover=\"allowDrop(event)\">\n            <h3>Backlog<button id=\"button_backlog\" onclick=\"addCard(&quot;column_backlog&quot;)\" class=\"add\"><strong>+</strong></button></h3>\n        </div>\n        <div id=\"column_todo\" class=\"column\" ondrop=\"drop(event)\" ondragover=\"allowDrop(event)\">\n            <h3>To Do<button id=\"button_todo\" onclick=\"addCard(&quot;column_todo&quot;)\" class=\"add\"><strong>+</strong></button></h3>\n        </div>\n        <div id=\"column_progress\" class=\"column\" ondrop=\"drop(event)\" ondragover=\"allowDrop(event)\">\n            <h3>In Progress<button id=\"button_progress\" onclick=\"addCard(&quot;column_progress&quot;)\" class=\"add\"><strong>+</strong></button></h3>\n        </div>\n        <div id=\"column_done\" class=\"column\" ondrop=\"drop(event)\" ondragover=\"allowDrop(event)\">\n            <h3>Done<button id=\"button_done\" onclick=\"addCard(&quot;column_done&quot;)\" class=\"add\"><strong>+</strong></button></h3>\n        </div>\n        <div id=\"column_deletar\" class=\"trash\" ondrop=\"dropDelete(event)\" ondragover=\"allowDrop(event)\">\n            <img src=\"./trash.png\" style=\"height: auto;\">\n            <div id=\"5\" class=\"dropzone\" draggable=\"true\" ondragstart=\"drag(event)\" ondrop=\"drop(event)\">\n            </div>\n        </div>\n    </div>\n\n<script>\n    let taskCounter = 0;\n    let boards = null;\n    let us_id_counter = 4;\n\n    function populateUsers()\n    {\n\n    }\n\n    function addCard(id)\n    {\n        us_id_counter++;\n        let str = `<div id=\"${us_id_counter}\" class=\"dropzone\" draggable=\"true\" ondragstart=\"drag(event)\" ondrop=\"drop(event)\">\n                <div class=\"card\" id=\"card-${us_id_counter}\"> \n                    <div class=\"first-line\">\n                        <div class=\"id\">${us_id_counter}</div>\n                        <div contentEditable=\"true\" class=\"content\">\n                            Nome da Feature\n                        </div>\n                    </div>\n                    <div class=\"second-line\">\n                        <select class=\"user\">\n                            <option value=\"Lucas\">Lucas</option>\n                            <option value=\"Willy\">Willy</option>\n                            <option value=\"Shin\">Shin</option>\n                            <option value=\"Giuliano\">Giuliano</option>\n                            <option value=\"selecione\" selected></option>\n                        </select>\n                        <select class=\"time\">\n                            <option value=\"1\">1</option>\n                            <option value=\"2\">2</option>\n                            <option value=\"3\">3</option>\n                            <option value=\"5\">5</option>\n                            <option value=\"8\">8</option>\n                        </select>\n                    </div>\n                    <div class=\"button-task-div\">\n                        <button class=\"button-task\" onclick='addTask(\"card-${us_id_counter}\")'><strong>+</strong></button>\n                    </div>    \n                </div>\n            </div>`\n\n        col = document.getElementById(id);\n        col.innerHTML+= str;\n    }\n\n    function addTask(id) {\n        \n        taskCounter++;\n\n        let str = \n            `<div id=\"${id}-${taskCounter}\">\n                <input type=\"checkbox\"></input>\n                <input class=\"input-task\"></input>\n                <button class=\"delete\" onclick='remove(\"${id}-${taskCounter}\")'><strong>-</strong></button>\n            </div>`\n\n        col = document.getElementById(id);\n        col.innerHTML+= str;\n    }\n\n    function remove(id) {\n        \n        el = document.getElementById(id)\n        el.remove()\n    }\n    // Gratos ao W3S e Mozilla\n    function allowDrop(ev) \n    {\n        ev.preventDefault();\n    }\n\n    function drag(ev) \n    {\n        ev.dataTransfer.setData(\"drop\", ev.target.id);\n    }\n\n    function drop(ev) \n    {\n        if(ev.target.className != \"column\")\n            return;\n\n        ev.preventDefault();\n        var data = ev.dataTransfer.getData(\"drop\");\n        ev.target.appendChild(document.getElementById(data));\n    }\n\n    function dropDelete(ev) \n    {\n        ev.preventDefault();\n        var data = ev.dataTransfer.getData(\"drop\");\n        el = document.getElementById(data)\n        el.remove()\n    }\n\n    function loadBoard(board)\n    {\n        document.getElementById(\"body\").innerHTML = board\n    }\n\n    function getBoard()\n    {\n        return document.getElementById(\"body\").innerHTML\n    }\n\n    const STOREBOARD_URL = \"/storeboard\"\n    const GETBOARDS_URL  = \"/getboards\"\n\n    //Ex: storeBoard(getBoard(), \"main_board\")\n    async function storeBoard(board, key)\n    {\n        data = \n        {\n            board: board,\n            key: key\n        }\n\n        await postServer(STOREBOARD_URL, data)\n    }\n\n    function storeCurrentBoard() \n    {\n        let board = getBoard()\n        storeBoard(board, \"main1\")\n    } \n\n    async function getBoards()\n    {\n        let listBoards = document.getElementById(\"board-list\");\n        boards = await queryServer(GETBOARDS_URL);\n        \n        for (let i = 0; i < boards.length; i++) \n            listBoards.innerHTML += `<div class=\"board-itens\" id=\"board-item-${i}-${boards[i].key}\"> \n                <label id=\"board-key-${i}-${boards[i].key}\" onClick=\"loadBoard(boards[${i}].board)\">${boards[i].key}</label>\n                <button class=\"delete\" onClick='remove(\"board-item-${i}-${boards[i].key}\")'>\n                    -\n                </button>\n            </div>`\n            \n        // loadBoard(boards[0].board)\n    }\n\n    /////////////////////////////////////////////////////////////////////////////////////////////////////\n    // Conexao servidor\n\n    async function queryServer(url)\n    {\n        let response = await fetch(url);\n        data         = await response.json(); \n        return data;\n    };\n\n    async function postServer(url, data)\n    {\n        let options  = {method: 'POST', body: JSON.stringify(data), headers: {'Content-Type': 'application/json'}};\n        let response = await fetch(url, options);\n        data         = await response.json();\n        return data;\n    };\n\n    let saveButtonStatus = 0;\n\n    function turnVisible() {\n        \n        if (saveButtonStatus == 0) {\n            document.getElementById(\"board-list\").style.visibility = \"visible\";\n            saveButtonStatus = 1;\n        } else {\n            document.getElementById(\"board-list\").style.visibility = \"hidden\";\n            saveButtonStatus = 0;\n        }\n    }\n\n    \n    getBoards()\n\n</script>\n","key":"main1"}